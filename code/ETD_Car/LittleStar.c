/*
 * LittleStar.c
 *
 *  Created on: 2021年7月8日
 *      Author: mcl
 */

#include "LittleStar.h"

int music1[64] = { //音乐1的数据表（奇数是对应音调频率，偶数是发声时间长度
        523, 600, 523, 600, 784, 600, 784, 600, 880, 600, 880, 600, 784, 600, 0,
        1200, 698, 600, 698, 600, 659, 600, 659, 600, 587, 600, 587, 600, 523,
        600, 0, 1200, 784, 600, 784, 600, 698, 600, 698, 600, 659, 600, 659,
        600, 587, 600, 0, 1200, 784, 600, 784, 600, 698, 600, 698, 600, 659,
        600, 659, 600, 587, 600, 0, 1200 };

int music2[70] = { 523, 600, 587, 600, 659, 600, 523, 600, 587, 600, 784, 600,
                   784, 600, 0, 600, 659, 600, 880, 300, 880, 300, 880, 600,
                   880, 600, 784, 300, 659, 300, 784, 600, 659, 600, 0, 600,
                   523, 900, 523, 300, 523, 600, 880, 300, 880, 300, 784, 600,
                   659, 600, 784, 600, 0, 600, 587, 400, 587, 800, 659, 600,
                   659, 300, 587, 300, 523, 300, 659, 300, 587, 1200};

void Port6_4_Init(void)
{
    P6->SEL0 &= ~0x10;
    P6->SEL1 &= ~0x10;
    P6->DIR |= 0x10;
    P6->OUT &= ~0X10;
}

void MIDI_PLAY(void)
{ //MIDI音乐
    int i, e;
    for (i = 0; i < 32; i++)
    { //这里因为这首歌有32个音调所以这里循环32次
        for (e = 0; e < music1[i * 2] * music1[i * 2 + 1] / 1000; e++)
        {
            P6->OUT &= ~0X10;
            Clock_Delay1us(500000 / music1[i * 2]);
            P6->OUT |= 0X10;
            Clock_Delay1us(500000 / music1[i * 2]);
        }
    }
}

void Sound_Play(void)
{
    int i, e;
    for (i = 0; i < 35; i++)
    { //这里因为这首歌有32个音调所以这里循环32次
        for (e = 0; e < music2[i * 2] * music2[i * 2 + 1] / 1000; e++)
        {
            P6->OUT &= ~0X10;
            Clock_Delay1us(500000 / music2[i * 2]);
            P6->OUT |= 0X10;
            Clock_Delay1us(500000 / music2[i * 2]);
        }
    }
}

